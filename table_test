<!DOCTYPE html>
<html lang="en" class="mmd">
<head>
    <meta charset="UTF-8">
    <title>表格测试</title>
    <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
    <script src="jquery-3.1.1.js"></script>
    <style>
        .tableWidth{
            width: 80%;
            margin: auto;
        }
        .wh{
            width: 80%;
            border: none;
            background-color: transparent;
        }
        .wh2{
            width: 20%;
        }
    </style>
</head>
<body>
<div ng-app="myApp" ng-controller="myCtrl">
    <button class="btn-lg btn-primary" ng-click="addBtnClick()">Add Row</button>
    <table class="table table-striped table-hover table-condensed table-bordered tableWidth table-center" ng-model="table">
        <thead>
        <tr>
            <td>序号</td>
            <td>fName</td>
            <td>lName</td>
            <td>age</td>
            <td>Action</td>
        </tr>
        </thead>
        <tbody >
        <tr ng-repeat="user in users">
            <td>{{$index + 1}}</td>
            <td class="wh2">
                <input type="text" id="id_{{user.id}}_{{user.fName}}" ng-model="user.fName" class="wh" placeholder="NofName" readonly />
            </td>
            <td class="wh2">
                <input type="text" id="id_{{user.id}}_{{user.lName}}" ng-model="user.lName" class="wh" placeholder="NolName" readonly />
            </td>
            <td class="wh2">
                <input type="text" id="id_{{user.id}}_{{user.age}}" ng-model="user.age" class="wh" placeholder="Noage" readonly />
            </td>
            <td>
                <button type="button" id="{{user.id}}_ediBtn" class="btn btn-primary" ng-click="edit(user)" >edit</button>
                <button type="button" id="{{user.id}}_delBtn" class="btn btn-warning" ng-click="delete(user)" >delete</button>
                <button type="button" id="{{user.id}}_savBtn" class="btn btn-primary" ng-click="save(user)" style="display: none">Save</button>
                <button type="button" id="{{user.id}}_canBtn" class="btn btn-default" ng-click="cancel(user)" style="display: none">Cancel</button>
            </td>
        </tr>
        </tbody>
    </table>

</div>
    <script>
      /**
 * Created by acer on 2016/10/24.
 */
var MessArray =[{id:1,fName:'Nike',lName:'husa',age:'28'}];
var app = angular.module('myApp',[]);
app.controller('myCtrl',function($scope){
    $scope.addMeH=true;
    $scope.users = [
        {id:1,fName:'Nike',lName:'husa',age:'28'},
        {id:2,fName:'John',lName:'aidnh',age:'22'},
        {id:3,fName:'Lucy',lName:'klcu',age:'20'},
        {id:4,fName:'David',lName:'sciuc',age:'25'},
        {id:5,fName:'Li',lName:'Hua',age:'28'}
    ];
    $scope.edit=function(user){
         MessArray[user.id]={id:user.id,fName:user.fName,lName:user.lName,age:user.age};
        var inF = [
            $('#id_'+user.id+'_'+user.fName),
            $('#id_'+user.id+'_'+user.lName),
            $('#id_'+user.id+'_'+user.age)
        ];
        for (i=0;i<inF.length;i++){
            inF[i].removeAttr('readonly');
            inF[i].css('border','1px').css('background-color','#1ECEE1');
        }
        $('#'+user.id+'_savBtn').show();
        $('#'+user.id+'_canBtn').show();
        $('#'+user.id+'_ediBtn').toggle();
        $('#'+user.id+'_delBtn').toggle();
        //$scope.editH=!$scope.editH;
    };
    $scope.delete =function(user){
        $scope.users.splice($scope.users.indexOf(user),1);
    };
    $scope.save = function(user){
        var inF = [
            $('#id_'+user.id+'_'+user.fName),
            $('#id_'+user.id+'_'+user.lName),
            $('#id_'+user.id+'_'+user.age)
        ];
        for (i=0;i<inF.length;i++){
            inF[i].attr("readonly","readonly");
            inF[i].css('border','').css('background-color','transparent');
        }
        $('#'+user.id+'_ediBtn').show();
        $('#'+user.id+'_delBtn').show();
        $('#'+user.id+'_savBtn').hide();
        $('#'+user.id+'_canBtn').hide();
        //$scope.editH=!$scope.editH;
    };
    $scope.cancel=function(user){
        $scope.users.splice(user.id-1,1,MessArray[user.id]);
        $scope.editH=!$scope.editH;
    };
    $scope.addBtnClick=function(){
        $scope.users.splice($scope.users.length,0,{id:$scope.users.length+1,fName:'NofName',lName:'NolName',age:'Noage'});
    };
});

    </script>


</body>
</html>
